
> gcal-simplified@0.0.7 test
> npm run test:clean && npm run test:unit && npm run test:run src/components/__tests__/SettingsModal.test.tsx


> gcal-simplified@0.0.7 test:clean
> node scripts/clean-tests.js

ğŸ§¹ Cleaning test artifacts...
âœ¨ Cleanup complete.

> gcal-simplified@0.0.7 test:unit
> vitest run


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/Users/brnat/Documents/Projects/gcal-simplified[39m

 [32mâœ“[39m src/utils/layout.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m electron/weather_locations.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mâœ“[39m electron/weather_security.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 16[2mms[22m[39m
Error: [vitest] No "User" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)
    at Object.get (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)
    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:112:30)
    at renderWithHooks (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
Error: [vitest] No "User" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)
    at Object.get (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)
    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:112:30)
    at renderWithHooks (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
[90mstderr[2m | src/components/__tests__/SettingsModal.test.tsx[2m > [22m[2mSettingsModal[2m > [22m[2mshould render at least one calendar when API returns calendars
[22m[39mThe above error occurred in the <SettingsModal> component:

    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:10:26)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

Error: [vitest] No "User" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)
    at Object.get (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)
    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:112:30)
    at renderWithHooks (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
Error: [vitest] No "User" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)
    at Object.get (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)
    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:112:30)
    at renderWithHooks (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
[90mstderr[2m | src/components/__tests__/SettingsModal.test.tsx[2m > [22m[2mSettingsModal[2m > [22m[2mshould render task lists when API returns task lists
[22m[39mThe above error occurred in the <SettingsModal> component:

    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:10:26)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

Error: [vitest] No "User" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)
    at Object.get (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)
    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:112:30)
    at renderWithHooks (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
Error: [vitest] No "User" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)
    at Object.get (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)
    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:112:30)
    at renderWithHooks (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
[90mstderr[2m | src/components/__tests__/SettingsModal.test.tsx[2m > [22m[2mSettingsModal[2m > [22m[2mshould always render week start day buttons
[22m[39mThe above error occurred in the <SettingsModal> component:

    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:10:26)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

Error: [vitest] No "User" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)
    at Object.get (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)
    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:112:30)
    at renderWithHooks (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
Error: [vitest] No "User" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)
    at Object.get (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)
    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:112:30)
    at renderWithHooks (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
[90mstderr[2m | src/components/__tests__/SettingsModal.test.tsx[2m > [22m[2mSettingsModal[2m > [22m[2mshould show error banner when loading fails
[22m[39mThe above error occurred in the <SettingsModal> component:

    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:10:26)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

Error: [vitest] No "User" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)
    at Object.get (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)
    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:112:30)
    at renderWithHooks (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
Error: [vitest] No "User" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)
    at Object.get (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)
    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:112:30)
    at renderWithHooks (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
[90mstderr[2m | src/components/__tests__/SettingsModal.test.tsx[2m > [22m[2mSettingsModal[2m > [22m[2mshould show empty calendars list with count 0 when API returns empty array
[22m[39mThe above error occurred in the <SettingsModal> component:

    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:10:26)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

Error: [vitest] No "User" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)
    at Object.get (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)
    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:112:30)
    at renderWithHooks (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
Error: [vitest] No "User" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:311:17)
    at Object.get (file:///C:/Users/brnat/Documents/Projects/gcal-simplified/node_modules/vitest/dist/chunks/startModuleRunner.DEj0jb3e.js:384:16)
    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:112:30)
    at renderWithHooks (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\brnat\Documents\Projects\gcal-simplified\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
[90mstderr[2m | src/components/__tests__/SettingsModal.test.tsx[2m > [22m[2mSettingsModal[2m > [22m[2mshould render Configuration title and Save button
[22m[39mThe above error occurred in the <SettingsModal> component:

    at SettingsModal (C:/Users/brnat/Documents/Projects/gcal-simplified/src/components/SettingsModal.tsx:10:26)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

 [31mâ¯[39m src/components/__tests__/SettingsModal.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 175[2mms[22m[39m
[31m     [31mÃ—[31m should render at least one calendar when API returns calendars[39m[32m 103[2mms[22m[39m
[31m     [31mÃ—[31m should render task lists when API returns task lists[39m[32m 15[2mms[22m[39m
[31m     [31mÃ—[31m should always render week start day buttons[39m[32m 15[2mms[22m[39m
[31m     [31mÃ—[31m should show error banner when loading fails[39m[32m 11[2mms[22m[39m
[31m     [31mÃ—[31m should show empty calendars list with count 0 when API returns empty array[39m[32m 14[2mms[22m[39m
[31m     [31mÃ—[31m should render Configuration title and Save button[39m[32m 12[2mms[22m[39m
 [32mâœ“[39m electron/weather.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 4350[2mms[22m[39m
     [33m[2mâœ“[22m[39m should fetch real weather data from Open-Meteo [33m 969[2mms[22m[39m
     [33m[2mâœ“[22m[39m should fetch tide data from Open-Meteo [33m 3374[2mms[22m[39m
 [32mâœ“[39m src/utils/slackWindows.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m src/utils/__tests__/weekNavigation.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 62[2mms[22m[39m
 [32mâœ“[39m src/utils/eventUtils.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mâœ“[39m src/hooks/__tests__/useCurrentDate.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 109[2mms[22m[39m
 [32mâœ“[39m src/utils/timeBuckets.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 14[2mms[22m[39m
[90mstderr[2m | electron/weather_marine.test.ts[2m > [22m[2mWeatherService - Marine Data[2m > [22m[2mshould fallback if CHS data has suspiciously low max speed (< 2.0kn)
[22m[39mCHS Current Data Suspect: Max speed 0.1kn < 2.0kn for Race Passage. Falling back.

[90mstderr[2m | electron/weather_marine.test.ts[2m > [22m[2mWeatherService - Marine Data[2m > [22m[2mshould fallback to Open-Meteo calculations if CHS current fetch fails
[22m[39mCHS Fetch Failed. CurrentCode: wcp, EventCode: wcp-hilo, Status: undefined/undefined

 [32mâœ“[39m electron/weather_marine.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m src/utils/marineLocations.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mâœ“[39m src/components/WeatherDashboard.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 275[2mms[22m[39m
 [32mâœ“[39m src/components/TidesPanel.test.tsx [2m([22m[2m1 test[22m[2m)[22m[32m 199[2mms[22m[39m
 [32mâœ“[39m src/components/__tests__/EventCard.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 825[2mms[22m[39m
     [33m[2mâœ“[22m[39m applies custom hex color style when provided [33m 488[2mms[22m[39m
 [32mâœ“[39m src/utils/colorMapping.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m src/utils/themeLogic.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mâœ“[39m src/utils/tideInterpolation.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mâœ“[39m src/utils/eventProcessing.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 10[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 6 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m src/components/__tests__/SettingsModal.test.tsx[2m > [22mSettingsModal[2m > [22mshould render at least one calendar when API returns calendars
[41m[1m FAIL [22m[49m src/components/__tests__/SettingsModal.test.tsx[2m > [22mSettingsModal[2m > [22mshould render task lists when API returns task lists
[41m[1m FAIL [22m[49m src/components/__tests__/SettingsModal.test.tsx[2m > [22mSettingsModal[2m > [22mshould always render week start day buttons
[41m[1m FAIL [22m[49m src/components/__tests__/SettingsModal.test.tsx[2m > [22mSettingsModal[2m > [22mshould show error banner when loading fails
[41m[1m FAIL [22m[49m src/components/__tests__/SettingsModal.test.tsx[2m > [22mSettingsModal[2m > [22mshould show empty calendars list with count 0 when API returns empty array
[41m[1m FAIL [22m[49m src/components/__tests__/SettingsModal.test.tsx[2m > [22mSettingsModal[2m > [22mshould render Configuration title and Save button
[31m[1mError[22m: [vitest] No "User" export is defined on the "lucide-react" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
vi.mock(import("lucide-react"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

[36m [2mâ¯[22m SettingsModal src/components/SettingsModal.tsx:[2m112:30[22m[39m

[90m [2mâ¯[22m renderWithHooks node_modules/react-dom/cjs/react-dom.development.js:[2m15486:18[22m[39m
[90m [2mâ¯[22m mountIndeterminateComponent node_modules/react-dom/cjs/react-dom.development.js:[2m20103:13[22m[39m
[90m [2mâ¯[22m beginWork node_modules/react-dom/cjs/react-dom.development.js:[2m21626:16[22m[39m
[90m [2mâ¯[22m beginWork$1 node_modules/react-dom/cjs/react-dom.development.js:[2m27465:14[22m[39m
[90m [2mâ¯[22m performUnitOfWork node_modules/react-dom/cjs/react-dom.development.js:[2m26599:12[22m[39m
[90m [2mâ¯[22m workLoopSync node_modules/react-dom/cjs/react-dom.development.js:[2m26505:5[22m[39m
[90m [2mâ¯[22m renderRootSync node_modules/react-dom/cjs/react-dom.development.js:[2m26473:7[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/6]â¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m18 passed[39m[22m[90m (19)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m103 passed[39m[22m[90m (109)[39m
[2m   Start at [22m 18:17:03
[2m   Duration [22m 25.21s[2m (transform 8.88s, setup 12.49s, import 55.19s, tests 6.17s, environment 134.02s)[22m

